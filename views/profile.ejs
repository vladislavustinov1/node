<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/reset.css" />
    <link rel="stylesheet" href="/css/bootstrap.css" />
    <link rel="stylesheet" href="/css/index.css" />
    <title><%= title %></title>
  </head>
  <body>
    <%- include(`./partials/header`) %>
    <div class="container">
      <div class="user__profile">
        <div class="profile__data">
          <img src="<%= avatar %>" alt="Аватарка" class="data__avatar" />
          <div class="data__user_info">
            <h2 class="data__name">Ваш никнейм: <%= username %></h2>
            <h2 class="data__role">Ваша роль: <%= role %></h2>
            <p class="data__status_title">Ваш статус:</p>
            <p class="data__status_info"><%= statusUser %></p>
            <a href="" class="data__status_info change__status"
              >Изменить статус</a
            >
          </div>
        </div>
      </div>
      <div class="profile__posts">
        <h4 class="posts__title">Все ваши посты:</h4>
        <% if (posts.length > 0) { %> <% posts.forEach((post) => { %>
        <div class="card entry">
          <div class="card-body">
            <div class="card-title"><%= post.title %></div>
            <div class="card-text"><%= post.content %></div>
            <div class="card-buttons">
              <a href="/updateCard/<%= post.uuid %>" class="card__update">
                Изменить</a
              >
              <a href="/deleteCard/<%= post.uuid %>" class="card__delete"
                >Удалить</a
              >
            </div>
          </div>
        </div>
        <% }); %> <% } else { %>
        <p class="post__empty">Постов нет...</p>
        <% } %>
      </div>
      <div class="profile__settings">
        <div class="settings__buttons">
          <button
            type="button"
            class="btn btn-primary"
            data-bs-toggle="modal"
            data-bs-target="#changeEmail"
          >
            Изменить почту
          </button>
          <div
            class="modal fade"
            id="changeEmail"
            tabindex="-1"
            aria-labelledby="exampleModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">
                    Изменить почту
                  </h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Закрыть"
                  ></button>
                </div>
                <div class="modal-body">
                  <h4 class="modal-body__title">
                    Заполните форму для смены почты
                    <form
                      action="<%= user.uuid %>/changeEmail"
                      method="post"
                      name="changeEmailForm"
                      id="changeEmailForm"
                    >
                      <label for="currentEmail">Введите текущую почту</label>
                      <input
                        type="email"
                        name="currentEmail"
                        id="currentEmail"
                        required
                      />
                      <label for="newEmail">Введите новую почту</label>
                      <input
                        type="email"
                        name="newEmail"
                        id="newEmail"
                        required
                      />
                    </form>
                  </h4>
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-secondary"
                    data-bs-dismiss="modal"
                  >
                    Отмена
                  </button>
                  <button
                    form="changeEmailForm"
                    type="submit"
                    class="btn btn-primary"
                  >
                    Изменить
                  </button>
                </div>
              </div>
            </div>
          </div>
          <button
            type="button"
            class="btn btn-primary"
            data-bs-toggle="modal"
            data-bs-target="#changePassword"
          >
            Изменить пароль
          </button>
          <div
            class="modal fade"
            id="changePassword"
            tabindex="-1"
            aria-labelledby="exampleModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">
                    Изменить пароль
                  </h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Закрыть"
                  ></button>
                </div>
                <div class="modal-body">
                  <h4 class="modal-body__title">
                    Заполните форму для смены пароля
                  </h4>
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-secondary"
                    data-bs-dismiss="modal"
                  >
                    Закрыть
                  </button>
                  <button type="button" class="btn btn-primary">
                    Сохранить изменения
                  </button>
                </div>
              </div>
            </div>
          </div>
          <button
            type="button"
            class="btn btn-primary"
            data-bs-toggle="modal"
            data-bs-target="#changeUsername"
          >
            Изменить никнейм
          </button>
          <div
            class="modal fade"
            id="changeUsername"
            tabindex="-1"
            aria-labelledby="exampleModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">
                    Изменить никнейм
                  </h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Закрыть"
                  ></button>
                </div>
                <div class="modal-body">
                  <h4 class="modal-body__title">
                    Заполните форму для смены никнейма
                  </h4>
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-secondary"
                    data-bs-dismiss="modal"
                  >
                    Закрыть
                  </button>
                  <button type="button" class="btn btn-primary">
                    Сохранить изменения
                  </button>
                </div>
              </div>
            </div>
          </div>
          <button
            type="button"
            class="btn btn-primary"
            data-bs-toggle="modal"
            data-bs-target="#changePassword"
          >
            Изменить аватар
          </button>
          <div
            class="modal fade"
            id="changePassword"
            tabindex="-1"
            aria-labelledby="exampleModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">
                    Изменить аватар
                  </h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Закрыть"
                  ></button>
                </div>
                <div class="modal-body">
                  <h4 class="modal-body__title">
                    Заполните форму для смены аватара
                  </h4>
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-secondary"
                    data-bs-dismiss="modal"
                  >
                    Закрыть
                  </button>
                  <button type="button" class="btn btn-primary">
                    Сохранить изменения
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
